{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fe22959dd4b10000c509","webpack:///./src/constant/index.js","webpack:///./src/index.js","webpack:///./src/oscillator/index.js","webpack:///./src/core/index.js"],"names":["CONTEXT","window","AudioContext","webkitAudioContext","PI","Math","TWOPI","SAMPLERATE","sampleRate","module","exports","Oscillator","props","type","freq","gain","phase","mod","setType","processor","createScriptProcessor","onaudioprocess","process","bind","input","createChannelMerger","connect","output","createGain","value","callback","getSineTick","getSquareTick","getSawtoothDTick","getSawtoothUTick","getTriTick","event","inputArray1","inputBuffer","getChannelData","inputArray2","outputArray","outputBuffer","bufferSize","length","i","getPhaseIncrement","lastInput","wrap","sin","val","Core","arguments"],"mappings":"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","file":"../examples/peril.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"peril\"] = factory();\n\telse\n\t\troot[\"peril\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fe22959dd4b10000c509","// export const AC = new (window.AudioContext || window.webkitAudioContext)()\n// export const PI = Math.PI\n// export const TWOPI = 2.0 * PI\n// export const SAMPLERATE = AC.sampleRate\n\nexport const CONTEXT = window.AudioContext || window.webkitAudioContext ? new (window.AudioContext || window.webkitAudioContext)() : null\nexport const PI = Math.PI\nexport const TWOPI = Math.PI * 2\nexport const SAMPLERATE = CONTEXT ? CONTEXT.sampleRate : 44100\n\n\n\n// WEBPACK FOOTER //\n// ./src/constant/index.js","import {CONTEXT} from './constant'\nimport Oscillator from './oscillator'\n\nmodule.exports = {\n  CONTEXT,\n  Oscillator\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Core from '../core'\nimport {CONTEXT, PI, TWOPI, SAMPLERATE} from '../constant'\n\nclass Oscillator extends Core {\n  constructor (props = {}) {\n    super(props)\n\n    this.type = props.type || 0\n    this.freq = props.freq || 440\n    this.gain = props.gain || 0\n    this.phase = props.phase || 0\n    this.mod = props.mod\n\n    this.setType(this.type)\n\n    if (CONTEXT) {\n      this.processor = CONTEXT.createScriptProcessor(1024)\n      this.processor.onaudioprocess = this.process.bind(this)\n\n      this.input = CONTEXT.createChannelMerger(2)\n\n      if (this.mod) {\n        this.mod.connect(this.input)\n      }\n\n      this.input.connect(this.processor)\n\n\n      this.output = CONTEXT.createGain()\n      this.output.gain.value = this.gain\n\n      this.processor.connect(this.output)\n    }\n  }\n\n  /* istanbul ignore next */\n  setType (type) {\n    this.type = type\n    switch (this.type) {\n      case 0:\n        this.callback = this.getSineTick\n        break\n      case 1:\n        this.callback = this.getSquareTick\n        break\n      case 2:\n        this.callback = this.getSawtoothDTick\n        break\n      case 3:\n        this.callback = this.getSawtoothUTick\n        break\n      case 4:\n      default:\n        this.callback = this.getTriTick\n        break\n    }\n  }\n\n  /* istanbul ignore next */\n  process (event) {\n    var inputArray1 = event.inputBuffer.getChannelData(0)\n    var inputArray2 = event.inputBuffer.getChannelData(1)\n    var outputArray = event.outputBuffer.getChannelData(0)\n    var bufferSize = outputArray.length\n\n    for (let i = 0; i < bufferSize; i++) {\n      outputArray[i] = this.callback(0)\n      this.freq = (inputArray1[i] ? inputArray1[i] + this.freq : this.freq)\n      this.phase += (this.getPhaseIncrement(this.lastInput))\n      this.lastInput = inputArray2[i]\n      this.wrap()\n    }\n  }\n\n  getSineTick (phase) {\n    return Math.sin(this.phase + phase)\n  }\n\n  getSquareTick (phase) {\n    if ((this.phase + phase) <= PI) {\n      return 1\n    }\n    return -1\n  }\n\n  getSawtoothUTick (phase) {\n    return 2 * (((this.phase + phase) * (1.0 / TWOPI))) - 1.0\n  }\n\n  getSawtoothDTick (phase) {\n    return 1.0 - 2 * ((this.phase + phase) * (1.0 / TWOPI))\n  }\n\n  getTriTick (phase) {\n    let val = (2 * ((this.phase + phase) * (1.0 / TWOPI))) - 1.0\n    /* istanbul ignore next */\n    if (val < 0.0) {\n      val = -val\n    }\n    val = 2.0 * (val - 0.5)\n    return val\n  }\n\n  getPhaseIncrement (freq = 0) {\n    return (TWOPI * (this.freq + freq)) / SAMPLERATE\n  }\n\n  wrap () {\n    /* istanbul ignore next */\n    if (this.phase > TWOPI) {\n      this.phase -= TWOPI\n    }\n  }\n}\n\nexport default Oscillator\n\n\n\n// WEBPACK FOOTER //\n// ./src/oscillator/index.js","class Core {\n  setOutput () {\n    for (let i = 0; i < arguments.length; i++) {\n      this.output.connect(arguments[i])\n    }\n  }\n}\n\nexport default Core\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/index.js"],"sourceRoot":""}